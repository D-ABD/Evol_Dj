{% extends 'base.html' %}
{% block title %}Modifier l'entr√©e - MyEvol{% endblock %}
{% block content %}
<h2 class="fw-bold mb-4">Modifier l'entr√©e</h2>

<form method="post">
  {% csrf_token %}
  <div class="mb-3">
    {{ form.content.label_tag }}
    {{ form.content }}
  </div>

  <div class="mb-3">
    {{ form.category.label_tag }}
    {{ form.category }}
  </div>

  <div class="mb-3">
    <label for="id_mood">Note d'humeur : <span id="mood-value">{{ form.mood.value }}</span>/10</label>
    {{ form.mood }}
    <div class="text-center fs-4" id="emoji-display">üòê</div>
  </div>

  <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
  <a href="{% url 'myevol:dashboard' %}" class="btn btn-secondary">Annuler</a>
</form>

<script>
function updateEmoji(value) {
  document.getElementById("mood-value").innerText = value;
  const emojis = ["üò°", "üò†", "üòü", "üòê", "üôÇ", "üòä", "üòÉ", "üòÅ", "ü§©", "üòç"];
  document.getElementById("emoji-display").innerText = emojis[Math.max(0, Math.min(9, value-1))];
}

const moodInput = document.getElementById("id_mood");
if (moodInput) {
  moodInput.addEventListener("input", (e) => updateEmoji(e.target.value));
  updateEmoji(moodInput.value);
}
</script>
{% endblock %}
